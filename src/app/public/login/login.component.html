<div class="login-container">
    <p-card header="Iniciar Sesión" class="login-card">
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">

            <div class="field">
                <p-floatlabel>
                    <input pInputText id="email" formControlName="email"
                        [class]="{'ng-invalid ng-dirty': isFieldInvalid('email')}" autocomplete="email" />
                    <label for="email">Email</label>
                </p-floatlabel>
                <small class="p-error" *ngIf="isFieldInvalid('email')">
                    <span *ngIf="loginForm.get('email')?.errors?.['required']">
                        El email es requerido
                    </span>
                    <span *ngIf="loginForm.get('email')?.errors?.['email']">
                        Ingresa un email válido
                    </span>
                </small>
            </div>

            <div class="field">
                <p-floatlabel>
                    <p-password [inputId]="'password'" formControlName="password"
                        [class]="{'ng-invalid ng-dirty': isFieldInvalid('password')}" [feedback]="false"
                        [toggleMask]="true" autocomplete="current-password" styleClass="w-full"></p-password>
                    <label for="password">Contraseña</label>
                </p-floatlabel>
                <small class="p-error" *ngIf="isFieldInvalid('password')">
                    <span *ngIf="loginForm.get('password')?.errors?.['required']">
                        La contraseña es requerida
                    </span>
                </small>
            </div>

            <p-message *ngIf="errorMessage" severity="error" [text]="errorMessage" styleClass="w-full mb-3"></p-message>

            <p-message *ngIf="successMessage" severity="success" [text]="successMessage"
                styleClass="w-full mb-3"></p-message>
            <div style="text-align: right; margin-top: 1rem;">
                <p-button type="submit" label="Iniciar Sesión" [disabled]="loginForm.invalid || isLoading"
                    [loading]="isLoading" styleClass="w-full" size="large"></p-button>
            </div>


        </form>

        <p-divider></p-divider>

        <div class="register-link">
            <p>¿No tienes cuenta? <a routerLink="/auth/register" class="link">Regístrate aquí</a></p>
        </div>
    </p-card>
</div>