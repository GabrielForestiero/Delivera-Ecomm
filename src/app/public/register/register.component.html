<div class="register-container">
  <p-card header="Registro de Usuario" class="register-card">
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
      
      <div class="field">
        <p-floatlabel>
          <input 
            pInputText 
            id="email"
            formControlName="email"
            [class]="{'ng-invalid ng-dirty': isFieldInvalid('email')}"
            autocomplete="email"
          />
          <label for="email">Email *</label>
        </p-floatlabel>
        <small class="p-error" *ngIf="isFieldInvalid('email')">
          <span *ngIf="registerForm.get('email')?.errors?.['required']">
            El email es requerido
          </span>
          <span *ngIf="registerForm.get('email')?.errors?.['email']">
            Ingresa un email válido
          </span>
        </small>
      </div>

      <div class="field">
        <p-floatlabel>
          <input 
            pInputText 
            id="name"
            formControlName="name"
            [class]="{'ng-invalid ng-dirty': isFieldInvalid('name')}"
            autocomplete="name"
          />
          <label for="name">Nombre Completo *</label>
        </p-floatlabel>
        <small class="p-error" *ngIf="isFieldInvalid('name')">
          <span *ngIf="registerForm.get('name')?.errors?.['required']">
            El nombre es requerido
          </span>
          <span *ngIf="registerForm.get('name')?.errors?.['minlength']">
            El nombre debe tener al menos 2 caracteres
          </span>
        </small>
      </div>

      <div class="field">
        <p-floatlabel>
          <p-password 
            [inputId]="'password'"
            formControlName="password"
            [class]="{'ng-invalid ng-dirty': isFieldInvalid('password')}"
            [feedback]="false"
            [toggleMask]="true"
            autocomplete="new-password"
            styleClass="w-full"
          ></p-password>
          <label for="password">Contraseña *</label>
        </p-floatlabel>
        <small class="p-error" *ngIf="isFieldInvalid('password')">
          <span *ngIf="registerForm.get('password')?.errors?.['required']">
            La contraseña es requerida
          </span>
          <span *ngIf="registerForm.get('password')?.errors?.['minlength']">
            La contraseña debe tener al menos 6 caracteres
          </span>
        </small>
      </div>

      <div class="field">
        <p-floatlabel>
          <input 
            pInputText 
            id="address"
            formControlName="address"
            [class]="{'ng-invalid ng-dirty': isFieldInvalid('address')}"
            autocomplete="street-address"
          />
          <label for="address">Dirección *</label>
        </p-floatlabel>
        <small class="p-error" *ngIf="isFieldInvalid('address')">
          <span *ngIf="registerForm.get('address')?.errors?.['required']">
            La dirección es requerida
          </span>
        </small>
      </div>

      <div class="field">
        <p-floatlabel>
          <input 
            pInputText 
            id="phone"
            formControlName="phone"
            [class]="{'ng-invalid ng-dirty': isFieldInvalid('phone')}"
            autocomplete="tel"
          />
          <label for="phone">Teléfono *</label>
        </p-floatlabel>
        <small class="p-error" *ngIf="isFieldInvalid('phone')">
          <span *ngIf="registerForm.get('phone')?.errors?.['required']">
            El teléfono es requerido
          </span>
          <span *ngIf="registerForm.get('phone')?.errors?.['pattern']">
            Ingresa un teléfono válido (solo números)
          </span>
        </small>
      </div>

      <p-message 
        *ngIf="errorMessage" 
        severity="error" 
        [text]="errorMessage"
        styleClass="w-full mb-3"
      ></p-message>

      <p-message 
        *ngIf="successMessage" 
        severity="success" 
        [text]="successMessage"
        styleClass="w-full mb-3"
      ></p-message>

      <p-button 
        type="submit"
        label="Registrarme"
        [disabled]="registerForm.invalid || isLoading"
        [loading]="isLoading"
        styleClass="w-full"
        size="large"
      ></p-button>
    </form>

    <div class="login-link">
      <p>¿Ya tienes cuenta? <a routerLink="/auth/login" class="link">Inicia sesión</a></p>
    </div>
  </p-card>
</div>
